-- 多注入器兼容配置（Delta/Krnl等）
getgenv()
local player = game:GetService("Players").LocalPlayer
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")

-- 等待游戏加载完成
repeat task.wait() until game:IsLoaded()

-- 角色加载监听
local character = player.Character or player.CharacterAdded:Wait()
local HumanoidRootPart = character:WaitForChild("HumanoidRootPart")
local humanoid = character:WaitForChild("Humanoid")
local LocalPlayer = Players.LocalPlayer

-- 加载游戏核心模块
local Signal = require(ReplicatedStorage.devv).load("Signal")
local item = require(ReplicatedStorage.devv).load("v3item")

-- 根据名称查找物品ID
local function findItemIdByName(name)
    for _, v in pairs(item.inventory.items) do
        if v.name == name then
            return v.guid
        end
    end
    return nil
end
local fistsId = findItemIdByName("Fists")
local shieldId = findItemIdByName("Riot Shield")

-- 自动装备拳头
local autoEquipFistsEnabled = true
local fistsEquipConnection
if autoEquipFistsEnabled then
    if fistsEquipConnection then fistsEquipConnection:Disconnect() end
    fistsEquipConnection = RunService.Heartbeat:Connect(function()
        if not LocalPlayer.Character then return end
        local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
        if humanoid and fistsId then
            pcall(function() Signal.FireServer("equip", fistsId) end)
        end
    end)
end

-- 统计数据（本地存储）
local stats = { totalItems = 0, moneyPrinters = 0, serverHops = 0 }
local dataKey = "DE_ohio" .. player.UserId
local success, savedData = pcall(function() return HttpService:JSONDecode(readfile(dataKey)) end)
if success and savedData then stats = savedData end
local function saveStats() pcall(function() writefile(dataKey, HttpService:JSONEncode(stats)) end) end

-- ==================== UI修改：锋芒脚本nb ====================
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "锋芒脚本UI"
ScreenGui.Parent = CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- 主框架
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.AnchorPoint = Vector2.new(0, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
MainFrame.BackgroundTransparency = 0.05
MainFrame.Position = UDim2.new(-1, 0, 0, 10) -- 初始隐藏，用于滑入动画
MainFrame.Size = UDim2.new(0, 400, 0, 320)
MainFrame.ZIndex = 2

-- 圆角
local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 16)
UICorner.Parent = MainFrame

-- 边框渐变
local BorderFrame = Instance.new("Frame")
BorderFrame.Name = "BorderFrame"
BorderFrame.Parent = MainFrame
BorderFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
BorderFrame.Size = UDim2.new(1, 0, 1, 0)
BorderFrame.ZIndex = 1
BorderFrame.ClipsDescendants = true

local BorderCorner = Instance.new("UICorner")
BorderCorner.CornerRadius = UDim.new(0, 16)
BorderCorner.Parent = BorderFrame

local BorderGradient = Instance.new("UIGradient")
BorderGradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0.00, Color3.fromRGB(128, 0, 255)),
    ColorSequenceKeypoint.new(0.50, Color3.fromRGB(255, 0, 128)),
    ColorSequenceKeypoint.new(1.00, Color3.fromRGB(128, 0, 255))
})
BorderGradient.Parent = BorderFrame

-- 发光效果
local GlowEffect = Instance.new("Frame")
GlowEffect.Name = "GlowEffect"
GlowEffect.Parent = BorderFrame
GlowEffect.BackgroundColor3 = Color3.fromRGB(128, 0, 255)
GlowEffect.Size = UDim2.new(1, 0, 1, 0)
GlowEffect.BackgroundTransparency = 0.7
GlowEffect.ZIndex = 0

local GlowCorner = Instance.new("UICorner")
GlowCorner.CornerRadius = UDim.new(0, 16)
GlowCorner.Parent = GlowEffect

-- 动画效果
local glowTween = TweenService:Create(GlowEffect, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1), { BackgroundTransparency = 0.9 })
glowTween:Play()
local borderTween = TweenService:Create(BorderGradient, TweenInfo.new(4, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut, -1), { Rotation = 360 })
borderTween:Play()
local slideInTween = TweenService:Create(MainFrame, TweenInfo.new(0.8, Enum.EasingStyle.Back, Enum.EasingDirection.Out), { Position = UDim2.new(0, 10, 0, 10) })
slideInTween:Play()

-- 标题：锋芒脚本nb
local TitleLabel = Instance.new("TextLabel")
TitleLabel.Name = "TitleLabel"
TitleLabel.Parent = MainFrame
TitleLabel.BackgroundTransparency = 1
TitleLabel.Position = UDim2.new(0, 0, 0, 20)
TitleLabel.Size = UDim2.new(1, 0, 0, 40)
TitleLabel.TextColor3 = Color3.fromRGB(255, 200, 255)
TitleLabel.TextSize = 28
TitleLabel.TextFont = Enum.Font.Bold
TitleLabel.Text = "锋芒脚本nb"
TitleLabel.TextAlignment = Enum.TextAlignment.Center
TitleLabel.ZIndex = 3

-- 统计文本
local StatsLabel = Instance.new("TextLabel")
StatsLabel.Name = "StatsLabel"
StatsLabel.Parent = MainFrame
StatsLabel.BackgroundTransparency = 1
StatsLabel.Position = UDim2.new(0, 20, 0, 80)
StatsLabel.Size = UDim2.new(1, -40, 0, 120)
StatsLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
StatsLabel.TextSize = 20
StatsLabel.TextFont = Enum.Font.Bold
StatsLabel.Text = string.format("目标物品: %d次\n钞票打印机: %d次\n换服次数: %d次", stats.totalItems, stats.moneyPrinters, stats.serverHops)

-- 服务器信息
local NextServerLabel = Instance.new("TextLabel")
NextServerLabel.Name = "NextServerLabel"
NextServerLabel.Parent = MainFrame
NextServerLabel.BackgroundTransparency = 1
NextServerLabel.Position = UDim2.new(0, 20, 0, 220)
NextServerLabel.Size = UDim2.new(1, -40, 0, 30)
NextServerLabel.TextColor3 = Color3.fromRGB(255, 150, 255)
NextServerLabel.TextSize = 18
NextServerLabel.TextFont = Enum.Font.Bold
NextServerLabel.Text = "正在获取服务器信息..."

-- ==================== 其余功能代码 ====================
-- 更新UI函数
local function updateUI(nextServerPlayers)
    StatsLabel.Text = string.format("目标物品: %d次\n钞票打印机: %d次\n换服次数: %d次", stats.totalItems, stats.moneyPrinters, stats.serverHops)
    NextServerLabel.Text = nextServerPlayers and string.format("下一个服务器: %d人", nextServerPlayers) or "正在获取服务器信息..."
    saveStats()
end
updateUI()

-- 配置参数
local scriptStartTime = os.time()
local forbiddenZoneCenter = Vector3.new(352.884155, 13.0287256, -1353.05396)
local forbiddenRadius = 80
local currentJobId = game.JobId
local targetItems = {
    "Money Printer", "Blue Candy Cane", "Bunny Balloon", "Ghost Balloon", "Clover Balloon",
    "Bat Balloon", "Gold Clover Balloon", "Golden Rose", "Black Rose", "Heart Balloon",
    "Diamond Ring", "Diamond", "Void Gem", "Dark Matter Gem", "Rollie",
    "NextBot Grenade", "Nuclear Missile Launcher", "Suitcase Nuke", "Helicopter", "Trident",
    "Golden Cup", "One Dollar Ballon"
}
local collectedItems = {}
local timeout = 30 -- 超时换服时间（秒）

-- 超时检测
local function checkTimeout() return (os.time() - scriptStartTime) >= timeout end

-- 获取可用服务器列表
local function getServers()
    local success, result = pcall(function()
        return HttpService:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?limit=100"))
    end)
    if success and result and result.data then
        local availableServers = {}
        local minPlayers = nil
        for _, server in ipairs(result.data) do
            if server.id ~= currentJobId and server.playing < server.maxPlayers then
                table.insert(availableServers, server)
                if not minPlayers or server.playing < minPlayers then
                    minPlayers = server.playing
                end
            end
        end
        return availableServers, minPlayers
    end
    return {}, nil
end

-- 换服函数
local function TPServer()
    stats.serverHops = stats.serverHops + 1
    updateUI()
    local servers, nextServerPlayers = getServers()
    updateUI(nextServerPlayers)
    if #servers > 0 then
        local randomServer = servers[math.random(1, #servers)]
        pcall(function() TeleportService:TeleportToPlaceInstance(game.PlaceId, randomServer.id, player) end)
    else
        task.wait(1)
        TPServer()
    end
    scriptStartTime = os.time() -- 重置超时时间
end

-- 自动拾取物品
local function AutoPickItem()
    local lastItemCheck = os.time()
    local itemFound = false
    while task.wait(0.01) do
        if checkTimeout() then TPServer() break end
        local foundValidItem = false
        -- 查找物品拾取点
        local itemPickups = Workspace:FindFirstChild("Game")
        if itemPickups then
            itemPickups = itemPickups:FindFirstChild("Entities")
            if itemPickups then
                itemPickups = itemPickups:FindFirstChild("ItemPickup")
            end
        end
        -- 遍历物品
        if itemPickups then
            for _, itemFolder in pairs(itemPickups:GetChildren()) do
                for _, itemPart in pairs(itemFolder:GetChildren()) do
                    if itemPart:IsA("MeshPart") or itemPart:IsA("Part") then
                        local itemPos = itemPart.Position
                        -- 排除禁区物品
                        if (itemPos - forbiddenZoneCenter).Magnitude > forbiddenRadius then
                            local prompt = itemPart:FindFirstChildWhichIsA("ProximityPrompt", true)
                            if prompt then
                                for _, targetName in pairs(targetItems) do
                                    if prompt.ObjectText == targetName then
                                        foundValidItem = true
                                        itemFound = true
                                        lastItemCheck = os.time()
                                        -- 配置提示框
                                        prompt.RequiresLineOfSight = false
                                        prompt.HoldDuration = 0
                                        -- 传送至物品位置
                                        local hipHeight = humanoid.HipHeight or 2
                 
